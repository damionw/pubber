<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-US">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Pubber Demo</title>
        <script type="application/javascript" language="javascript" src="pubber.js"></script>
    </head>

    <body>
        <div
            subscribe="open,close"
            listener="subscription_event"
            style="background: blue;"
        >
        Here I am
        </div>
        <div style="width: 100px; height: 40px; background: yellow" onclick="test_emitter()">
            Press me !
        </div>
    </body>

    <script type="application/javascript">
        function subscription_event(topic, payload) {
            console.log("Element " + this.nodeName + " got message " + topic + " with payload " + Object.entries(payload).length);

            if (topic == "open") {
            }
            else if (topic == "close") {
            }
        }

        function test_emitter() {
            pubsubMessageRouter.singleton.emit("open", {name: "whatever"});
        }
    </script>
    <pubsub-router>
    </pubsub-router>
</html>
